<ion-header [translucent]="true">
  <ion-toolbar style="--background: #00897b;">
    <ion-buttons slot="start">
      <ion-menu-button auto-hide="false">
        <ion-icon name="menu-outline" style="color: white; font-size: 24px;"></ion-icon>
      </ion-menu-button>
    </ion-buttons>
    <ion-title style="color: white;">Approve / Reject</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true">
  <ion-item-divider class="searchBarFixed">
    <ion-searchbar 
      class="searchBars" 
      placeholder="{{ currentFilterPlaceholder }}"
      [(ngModel)]="searchValue"
      (ionInput)="filterSearch()"  (keyup)="clear($event)">
    </ion-searchbar>
    
    <ion-icon name="filter" class="addIcon" size="large" (click)="toggleFilterPopover($event)"></ion-icon>
  </ion-item-divider>
  
  <ion-popover [isOpen]="isFilterPopoverOpen" (didDismiss)="isFilterPopoverOpen = false">
    <ng-template>
      <ion-list>
        <ion-item button (click)="selectFilter('name')">Name</ion-item>
        <ion-item button (click)="selectFilter('email')">Email</ion-item>
        <ion-item button (click)="selectFilter('date')">Date</ion-item>
        <ion-item button (click)="selectFilter('status')">Status</ion-item>
      </ion-list>
    </ng-template>
  </ion-popover>
  
  <ion-grid class="custom-card">
    <ion-row *ngFor="let item of searchResults" style="align-items: center; border-bottom: 1px solid #dcdcdc; margin-top: 2px; padding: 10px;" class="card-row">
      <ion-col size="4">
        <img [src]="getImage(item.image)" alt="Item Image"
          style="width: 60%; max-height: 100px; margin: auto; display: block;" (click)="openImageModal(item.image)"/>
      </ion-col>
      <ion-col size="6" style="font-size: 14px; color: #666;">
        <p style="font-size: 14px; font-weight: bold; color: #333;">{{ item.name }}</p>
        <p style="font-size: 12px; font-weight: bold; color: #333;">{{ item.email }}</p>
        <p style="font-size: 12px; color: #999;">Received Date: {{ item.receivedDate | date: 'shortDate' }}</p>
        <p style="font-size: 12px; color: #999;">{{ item.status }}</p>
      </ion-col>
      <ion-col size="2">
        <ion-button fill="clear" size="small" (click)="toggleFilterPopoverApprove($event)">
          <ion-icon name="ellipsis-vertical" slot="end" style="color: #00897b;"></ion-icon>
        </ion-button>
        <ion-popover [isOpen]="PopoverOpen" (didDismiss)="PopoverOpen = false" [dismissOnSelect]="true" [showBackdrop]="false">
          <ng-template>
            <ion-content>
              <ion-list>
                <ion-item [button]="true" [detail]="false">Approve</ion-item>
                <ion-item [button]="true" [detail]="false">Reject</ion-item>
                <ion-item [button]="true" [detail]="false">Remove</ion-item>
                <ion-item [button]="true" [detail]="false">Claimed</ion-item>
              </ion-list>
            </ion-content>
          </ng-template>
        </ion-popover>       
      </ion-col>
    </ion-row>
  </ion-grid>
  <ion-modal [isOpen]="isImageModalOpen" (didDismiss)="closeImageModal()"   style="--width: 300px; --height: 270px; --max-width: 90%; --max-height: 90%; --border-radius: 15px; --box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);">
    <ng-template>
      <ion-content>
        <div style="text-align: center;">
          <img [src]="selectedImage" alt="Selected Image" style="width: 90%; height: 250px; object-fit: contain;" />
          <ion-button fill="clear" (click)="closeImageModal()" style="position: absolute; top: 10px; right: 10px;">
            <ion-icon name="close" style="color: #f90000;"></ion-icon>
          </ion-button>
        </div>
      </ion-content>
    </ng-template>
  </ion-modal>
</ion-content>